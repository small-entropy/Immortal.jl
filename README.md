# Immortal

[![Stable](https://img.shields.io/badge/docs-stable-blue.svg)](https://small-entropy.github.io/Immortal.jl/stable)
[![Dev](https://img.shields.io/badge/docs-dev-blue.svg)](https://small-entropy.github.io/Immortal.jl/dev)
[![Build Status](https://travis-ci.com/small-entropy/Immortal.jl.svg?branch=master)](https://travis-ci.com/small-entropy/Immortal.jl)
[![Build Status](https://ci.appveyor.com/api/projects/status/github/small-entropy/Immortal.jl?svg=true)](https://ci.appveyor.com/project/small-entropy/Immortal-jl)
[![Build Status](https://api.cirrus-ci.com/github/small-entropy/Immortal.jl.svg)](https://cirrus-ci.com/github/small-entropy/Immortal.jl)
[![Coverage](https://codecov.io/gh/small-entropy/Immortal.jl/branch/master/graph/badge.svg)](https://codecov.io/gh/small-entropy/Immortal.jl)
[![Coverage](https://coveralls.io/repos/github/small-entropy/Immortal.jl/badge.svg?branch=master)](https://coveralls.io/github/small-entropy/Immortal.jl?branch=master)

Immortal - фреймворк для написания серверов в стиле ООП.

## Идеология
Основные идеи фреймворка Immortal мы сформулировали в виде ДАО нашей технологии (которое получили через боль и страдания, за счет многих итераций при разработки общих архитектурных решений):
* В реальном мире все есть объект, который не может быть мутирован из вне.
* Сервер приложения есть объект реального мира и он не может быть мутирован из вне.
* Любой объект реального мира может получать данные через информационные каналы.
* Любой сервер приложения может получать данные через информационные каналы в виде серверов очередей.
* Любой объект реального мира может реагировать на полученную информацию.
* Любой сервер приложения может реагировать на полученные сообщения из сервиса сообщений.
* Любая реакция объекта реального мира есть новый поток данных, который распространяется через те же информационные каналы.
* Любая реакция сервиса сообщений есть новое сообщение, которое публикуется на сервисе сообщений.
* Любой объект реального мира не может напрямую создавать другие объекты реального мира. Для этого ему нужны инструмнеты воздействия.
* Любой сервис приолжений не может создавать объекты данных, для этого нужен отдельный инструмент - сервис баз данных.
* Любой объект реального мира выполняет ограниченный набор функций и не может быть универсальным. 
* Любой сервис приложений выполняет узкоспециализированные задачи, которые описываются бизнес-процессами.
* Любая сложная задача реального мира становится простой, если правильно применена декомпозиция.
* Любой сервис приложений решает сложные задачи за счёт дробления на простые задачи и распределения их между разными сервисами.
* Цель любого инструмента реального мира упрощать решение рутинных задач для сосредоточения ресурсов на решении проблемы/потребности.
* Цель любого фреймворка убрать из пула задач рутинные и свести разработку к решению бизнес кейсов.
* В реальном мире особенно ценен тот инструмент, который даёт необходимый уровень свободы для решения задачи.
* В разработке особенно ценен тот фреймворк, который даёт необходимый уровень гибкости и не даёт пользователю возможности выстрелить себе в ногу.
* В реальном мире всегда есть очевидный путь решения проблемы/задачи.
* В любой хорошем фреймворке всегда есть очевидный способ решения ошибки/задачи.

## Модули Immortal
Фреймворк Immortal содержит в себе набор модулей, который облегчают разработку сервером, которые взаимодействуют с сервисом очередей. На данный момент реалзована поддержка только RabbitMQ.
* Chronometer - модуль для работы со временем
* Rabbit - модуль для работы с RabbitMQ
### Модули Rabbit
* Consumers - модуль для работы с консьюмерами
* Exchanges - модуль для работы с обменниками
* Messages - модуль для работы с сообщениями
* Queues - модуль для работы с очередями
#### Consumers
Модуль для работы с консьюмерами
* base_consumer - базовый консьюмер
#### Exchanges
Модуль для работы с обменниками
* declare - объявление (регистрация) обменника
* delete - удаление обменника
#### Messages
Модуль для работы с сообщениями
* create_and_publish - функция создания сообщения с его последующей публикацией
#### Queues
Модуль для работы с очередями
* delete - удаление очереди
* declare - регистрация очереди
* bind - связывание очереди и маршрута через обменик
* unbind - отвязать очередь от маршрута
* purge - очистить очередь
* unsubscribe - отписаться от событий очереди
* subscribe - подписаться на события очереди